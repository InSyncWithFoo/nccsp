[project]
name = "nccsp"
version = "0.1.0"
description = "Ad hoc parser for Nushell command completion scripts generated by clap_complete."
readme = "README.md"
requires-python = ">=3.13"
license = { text = "MIT" }
authors = [
	{ name = "InSyncWithFoo", email = "insyncwithfoo@gmail.com" }
]
dependencies = [
	"pydantic~=2.9.0",
	"regex~=2024.7.24",
	"typer~=0.12.5"
]

[dependency-groups]
dev = [
	"hatch~=1.12.0",
	"hypothesis~=6.112.0",
	"pyright~=1.1.379",
	"pytest~=8.3.2",
	"pytest-cov~=5.0.0",
	"tox~=4.18.0"
]

[project.urls]
"Homepage" = "https://github.com/InSyncWithFoo/nccsp"

[project.scripts]
nccsp = "nccsp.runner:main"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.build.targets.sdist]
include = ["src"]

[tool.pytest.ini_options]
addopts = "--strict-markers --cov=<template> --cov-report=html"
testpaths = ["tests"]

[tool.coverage.report]
exclude_also = [
	'^([^\S\n]+)@(?:overload|abstractmethod)',
	'if TYPE_CHECKING:'
]

[tool.pyright]
include = ["src"]
strict = ["src"]
pythonPlatform = "All"
typeCheckingMode = "strict"

[tool.ruff]
include = ["src/**"]
exclude = ["tests/**"]
line-length = 120
target-version = "py313"

[tool.ruff.lint]
select = ["ALL"]
ignore = [
	"ANN101",    # missing-type-self
	"ANN102",    # missing-type-cls

	"COM812",    # missing-trailing-comma

	"D200",      # fits-on-one-line
	"D202",      # no-blank-line-after-function
	"D205",      # blank-line-after-summary
	"D206",      # indent-with-spaces
	"D212",      # multi-line-summary-first-line
	"D300",      # triple-single-quotes
	"D401",      # non-imperative-mood

	"ERA001",    # commented-out-code

	"I001",      # unsorted-imports

	"N818",      # error-suffix-on-exception-name

	"PIE790",    # unnecessary-placeholder

	"Q000",      # bad-quotes-inline-string
	"Q001",      # bad-quotes-multiline-string
	"Q002",      # bad-quotes-docstring

	"W191",      # tab-indentation
	"W291",      # trailing-whitespace
	"W293"       # blank-line-with-whitespace
]

[tool.ruff.format]
quote-style = "preserve"
